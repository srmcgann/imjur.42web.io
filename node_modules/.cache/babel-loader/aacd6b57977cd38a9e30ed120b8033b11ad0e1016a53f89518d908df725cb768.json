{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-599be988\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"main\",\n  ref: \"main\",\n  tabindex: \"0\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"uploadProgressContainer\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_4 = {\n  class: \"progressBar\"\n};\nconst _hoisted_5 = {\n  class: \"progressBarInnerOutline\"\n};\nconst _hoisted_6 = [\"innerHTML\"];\nconst _hoisted_7 = {\n  class: \"uploadModalInner\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  style: {\n    \"font-size\": \"2em\",\n    \"color\": \"#888\"\n  }\n}, \"upload tracks\", -1));\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  style: {\n    \"font-size\": \"1.4em\",\n    \"color\": \"#ff0\"\n  }\n}, \"drop file(s) here...\", -1));\nconst _hoisted_18 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_20 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_21 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_22 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_23 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_24 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_25 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_26 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_27 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_28 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_29 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_30 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_31 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_32 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_33 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_34 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  style: {\n    \"font-size\": \".7em\"\n  }\n}, \"(per file)\", -1));\nconst _hoisted_35 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_36 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_37 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_38 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  style: {\n    \"font-size\": \".7em\"\n  }\n}, \"(at a time)\", -1));\nconst _hoisted_39 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_40 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_41 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_42 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"font-size\": \".6em\"\n  }\n}, [/*#__PURE__*/_createTextVNode(\" WARRANTY: none\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createTextVNode(\" this website is a work-in-progress.\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createTextVNode(\" your files will likely be deleted\")], -1));\nconst _hoisted_43 = {\n  key: 1,\n  class: \"links\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Link = _resolveComponent(\"Link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.showUploadProgress ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_hoisted_3, _createTextVNode(\"uploading \" + _toDisplayString($data.filesUploading.length) + \" file\" + _toDisplayString($data.filesUploading.length > 1 ? 's' : '') + \"... \", 1), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.filesUploading, file => {\n    return _openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", {\n      class: \"progressBarInner\",\n      style: _normalizeStyle('width:calc(' + file.perc + '%)')\n    }, null, 4)]), _createElementVNode(\"span\", {\n      class: \"progressText\",\n      innerHTML: Math.round(file.perc * 100) / 100 + '%' + ' - ' + $options.shortUploadName(file.uploadName)\n    }, null, 8, _hoisted_6)]);\n  }), 256))])) : _createCommentVNode(\"\", true), $props.state.showUploadModal ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 1,\n    class: _normalizeClass([\"uploadModal\", {\n      'dragover': $data.dragover\n    }]),\n    onDrop: _cache[2] || (_cache[2] = _withModifiers((...args) => _ctx.processDrop && _ctx.processDrop(...args), [\"prevent\"])),\n    onDragover: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.dragOverHandler && $options.dragOverHandler(...args), [\"prevent\"])),\n    onDragleave: _cache[4] || (_cache[4] = _withModifiers((...args) => $options.dragLeaveHandler && $options.dragLeaveHandler(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _hoisted_9, _hoisted_10, _hoisted_11, _createTextVNode(\"valid formats\"), _hoisted_12, _hoisted_13, _createTextVNode(\" MP3, OGG, WAV\"), _hoisted_14, _hoisted_15, _hoisted_16, _hoisted_17, _hoisted_18, _hoisted_19, _createTextVNode(\"or\"), _hoisted_20, _hoisted_21, _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.uploadManual()),\n    style: {\n      \"background\": \"#0f0\",\n      \"max-width\": \"400px\"\n    }\n  }, \"manually select one from your device\"), _hoisted_22, _hoisted_23, _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = $event => $props.state.showUploadModal = false),\n    style: {\n      \"background\": \"#400\",\n      \"color\": \"#fee\",\n      \"font-weight\": \"400\"\n    }\n  }, \"cancel\")])], 34)) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", {\n    id: \"dropTarget\",\n    class: \"dropTarget\",\n    onDragover: _cache[6] || (_cache[6] = _withModifiers(() => {}, [\"prevent\"])),\n    onDrop: _cache[7] || (_cache[7] = _withModifiers($event => $options.dropFiles($event), [\"prevent\"])),\n    onClick: _cache[8] || (_cache[8] = () => {}),\n    ref: \"dropTarget\"\n  }, [!($props.state.userLinks.length || $props.state.links.length || $props.state.loadingAssets) ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    ref: \"dropTargetCaption\",\n    id: \"dropTargetCaption\",\n    style: {\n      \"cursor\": \"pointer\"\n    },\n    onClick: _cache[5] || (_cache[5] = $event => this.loadFiles())\n  }, [_createTextVNode(\" throw sum filez [click/drop]\"), _hoisted_24, _hoisted_25, _createTextVNode(\" accepted : gif\"), _hoisted_26, _createTextVNode(\"            web[p/m]\"), _hoisted_27, _createTextVNode(\"            png\"), _hoisted_28, _createTextVNode(\"            jp[e]g\"), _hoisted_29, _createTextVNode(\"            mp4\"), _hoisted_30, _createTextVNode(\"            mp3\"), _hoisted_31, _hoisted_32, _createTextVNode(\" max size : 25MB\"), _hoisted_33, _hoisted_34, _hoisted_35, _hoisted_36, _createTextVNode(\" max files: 15\"), _hoisted_37, _hoisted_38, _hoisted_39, _hoisted_40, _hoisted_41, _hoisted_42], 512)) : _createCommentVNode(\"\", true), $props.state.links.length || $props.state.userLinks.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_43, [$props.state.links.length ? (_openBlock(true), _createElementBlock(_Fragment, {\n    key: 0\n  }, _renderList($props.state.links, link => {\n    return _openBlock(), _createBlock(_component_Link, {\n      state: $props.state,\n      link: link,\n      linkMode: 'link',\n      key: link.id\n    }, null, 8, [\"state\", \"link\"]);\n  }), 128)) : _createCommentVNode(\"\", true), $props.state.userLinks.length ? (_openBlock(true), _createElementBlock(_Fragment, {\n    key: 1\n  }, _renderList($props.state.userLinks, link => {\n    return _openBlock(), _createBlock(_component_Link, {\n      state: $props.state,\n      link: link,\n      linkMode: 'userLink',\n      key: link.id\n    }, null, 8, [\"state\", \"link\"]);\n  }), 128)) : _createCommentVNode(\"\", true)])) : _createCommentVNode(\"\", true)], 544)], 512);\n}","map":{"version":3,"names":["class","ref","tabindex","key","_createElementVNode","style","_createTextVNode","_createElementBlock","_hoisted_1","$data","showUploadProgress","_hoisted_2","_hoisted_3","_toDisplayString","filesUploading","length","_Fragment","_renderList","file","_hoisted_4","_hoisted_5","_normalizeStyle","perc","innerHTML","Math","round","$options","shortUploadName","uploadName","_hoisted_6","_createCommentVNode","$props","state","showUploadModal","_normalizeClass","dragover","onDrop","_cache","_withModifiers","args","_ctx","processDrop","onDragover","dragOverHandler","onDragleave","dragLeaveHandler","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","onClick","$event","uploadManual","_hoisted_22","_hoisted_23","id","dropFiles","userLinks","links","loadingAssets","loadFiles","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","link","_createBlock","_component_Link","linkMode"],"sources":["/home/whitehotrobot/imjur.42web.io/src/components/Main.vue"],"sourcesContent":["<template>\n  <div class=\"main\" ref=\"main\" tabindex=\"0\">\n    <div v-if=\"showUploadProgress\" class=\"uploadProgressContainer\">\n      <br>uploading {{filesUploading.length}} file{{filesUploading.length > 1 ? 's':''}}...\n      <div class=\"progressBar\" v-for=\"file in filesUploading\">\n        <div class=\"progressBarInnerOutline\">\n          <div class=\"progressBarInner\" :style=\"'width:calc(' + (file.perc) + '%)'\"></div>\n        </div>\n        <span class=\"progressText\" v-html=\"(Math.round(file.perc*100)/100) + '%' + ' - ' + shortUploadName(file.uploadName)\"></span>\n      </div>\n    </div>\n    <div\n      v-if=\"state.showUploadModal\"\n      class=\"uploadModal\"\n      :class=\"{'dragover': dragover}\"\n      @drop.prevent=\"processDrop\"\n      @dragover.prevent=\"dragOverHandler\"\n      @dragleave.prevent=\"dragLeaveHandler\"\n    >\n      <div class=\"uploadModalInner\">\n        <span style=\"font-size: 2em;color: #888\">upload tracks</span><br><br>\n        <br>valid formats<br><br>\n        MP3, OGG, WAV<br><br><br>\n        <span style=\"font-size: 1.4em;color: #ff0\">drop file(s) here...</span><br>\n        <br>or<br><br>\n        <button @click=\"uploadManual()\" style=\"background: #0f0;max-width: 400px;\">manually select one from your device</button><br><br>\n        <button @click=\"state.showUploadModal = false\" style=\"background: #400;color: #fee;font-weight: 400;\">cancel</button>\n      </div>\n    </div>\n    <div\n      id=\"dropTarget\"\n      class=\"dropTarget\"\n      @dragover.prevent\n      @drop.prevent=\"dropFiles($event)\"\n      @click=\"\"\n      ref=\"dropTarget\"\n    >\n      <div\n        ref=\"dropTargetCaption\"\n        id=\"dropTargetCaption\"\n        v-if=\"!(state.userLinks.length || state.links.length || state.loadingAssets)\"\n        style=\"cursor: pointer;\"\n        @click=\"this.loadFiles()\"\n      >\n        throw sum filez [click/drop]<br><br>\n        accepted : gif<br>\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;web[p/m]<br>\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;png<br>\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jp[e]g<br>\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mp4<br>\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mp3<br><br>\n        max size : 25MB<br>\n        <span style=\"font-size: .7em;\">(per file)</span><br><br>\n        max files: 15<br>\n        <span style=\"font-size: .7em;\">(at a time)</span><br><br><br>\n        <div style=\"font-size: .6em;\">\n        WARRANTY: none<br><br>\n        this website is a work-in-progress.<br>\n        your files will likely be deleted</div>\n      </div>\n      <div v-if=\"state.links.length || state.userLinks.length\" class=\"links\">\n        <Link\n          :state=\"state\"\n          v-for=\"link in state.links\"\n          :link=\"link\"\n          :linkMode=\"'link'\"\n          :key=\"link.id\"\n          v-if=\"state.links.length\"\n        />\n        <Link\n          :state=\"state\"\n          v-for=\"link in state.userLinks\"\n          :link=\"link\"\n          :linkMode=\"'userLink'\"\n          :key=\"link.id\"\n          v-if=\"state.userLinks.length\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Link from './Link'\n\nexport default {\n  name: 'Main',\n  props: [ 'state' ],\n  components: {\n    Link\n  },\n  data(){\n    return {\n      preload: [],\n      rejects: [],\n      dragover: false,\n      showUploadProgress: false,\n      filesUploading: []\n    }\n  },\n  methods: {\n    shortUploadName(str){\n      let ret = str\n      if(ret.length > 43) ret = ret.substring(0, 30) + '...' + ret.substring(ret.length-10)\n      return ret\n    },\n    dragLeaveHandler(){\n      this.dragover = false\n    },\n    dragOverHandler(){\n      this.dragover = true\n    },\n    processUpload(files){\n    \n      if(!files.length) return\n      this.showUploadProgress = true\n      this.$refs.main.style.zIndex = 100000\n      this.filesUploading = Array(files.length).fill().map(v=>{return {}})\n      console.log(files)\n      Array.from(files).forEach((v, i)=>{\n        v.completed = false\n        this.filesUploading[i].perc = 0\n        this.filesUploading[i].uploadName = v.name\n      })\n        \n      let ct = 0\n      files.map((file, i) => {\n        console.log(`file ${i}: `, file)\n        if((\n          file.type == 'image/gif' ||\n          file.type == 'image/jiff' ||\n          file.type == 'image/jpeg' ||\n          file.type == 'image/jpg' ||\n          file.type == 'image/png' ||\n          file.type == 'image/webp' ||\n          file.type == 'video/mp4' ||\n          file.type == 'video/webm' ||\n          file.type == 'video/mkv' ||\n          file.type == 'audio/mp3' ||\n          file.type == 'audio/wav' ||\n          file.type == 'audio/mpeg') &&\n          file.size < 25000000){\n          ct++\n        } else {\n          this.rejects = [...this.rejects, file]\n        }\n      })\n      \n      let rej = '<div style=\"min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #4008; color: #f88; padding-top: 100px;\">'\n      this.rejects.map(reject=>{\n        let sz = (reject.size/(1024**2)|0).toLocaleString('en-us') + ' MB<br>'\n        rej += `oversized/rejected: size: ${sz} \"${reject.name}\" <br><br>`\n      })\n      if(this.rejects.length) {\n        this.state.modalQueue = [...this.state.modalQueue, rej + '</div>']\n        this.state.closeModal()\n      } else if(ct) {\n        Array.from(files).forEach((v, i) => {\n          let batchMetaData = {\n            loggedIn: this.state.loggedIn,\n            userID: this.state.loggedinUserID,\n            passhash: this.state.passhash,\n            description: '',\n          }\n          console.log('batchMetaData', batchMetaData)\n          let data = new FormData()\n          data.append(`uploads_${0}`, v)\n          //data.append('file', v)\n          data.append('batchMetaData', JSON.stringify(batchMetaData))\n          let request = new XMLHttpRequest()\n          request.open('POST', 'upload.php')\n          request.upload.addEventListener('progress', e => {\n            let perc = (e.loaded / e.total)*100\n            this.filesUploading[i].uploadName = v.name\n            this.filesUploading[i].perc = perc\n          })\n          request.addEventListener('load', e=> {\n            v.completed = true\n            let finished = true\n            Array.from(files).forEach(q=>{\n              if(!q.completed) finished = false\n            })\n            if(finished) {\n              this.showUploadProgress = false\n              this.$refs.main.style.zIndex = 0\n              this.state.modalContent = ''\n              this.state.closeModal()\n              if(this.state.loggedIn){\n                console.log('logged in tho?')\n                this.state.jumpToPage(0)\n                this.state.links = []\n                this.state.fetchUserLinks(this.state.loggedinUserID)\n              }else{\n                this.state.modalContent = '<div style=\"box-sizing: border-box;min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #0846; color: #8f8; padding: 100px; text-align: left;\">' + `excellent choice, uploading here...<br><br>you have not logged in though, which means your links will be lost soon.<br><br>If you register, nothing is needed except a name of your choosing and a password you will remember, then these uploads will be auto-saved to your new profile...<br><br>just don't close the page or refresh before you login or register!<br><br><br>thanks for using imjur!` + '</div>'\n                this.state.showModal = true\n                this.state.showRegister = true\n                this.state.showLoginPrompt = true\n              }\n            }\n            if(e.currentTarget.responseText[0] != '<'){\n              let data = JSON.parse(e.currentTarget.responseText)\n              if(data[0]){\n                data[1].map((v, j)=>{\n                  //addLink(size, type, ct, href, selected, userID, slug, originalSlug, origin, serverTZO, views, ids){\n                  this.addLink(data[2][j], data[3][j], i, v, false, this.state.loggedinUserID, data[6][j], data[7][j], data[8][j], data[9], data[10][j], data[11][j], data[12][j])\n                })\n              }else{\n                this.state.modalContent = '<div style=\"min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #8002; color: #f88; padding-top: 100px;\">' + data[5] + '</div>'\n              }\n            }\n          })\n          request.send(data)\n        })\n      }else{\n        this.$refs.main.style.zIndex = 0\n        alert('no files were uploaded. hmmmm. mebbe too big tho')\n        this.state.closeModal()\n        this.showUploadProgress = false\n      }\n    },\n    dropFiles(e){\n\n      /*let files = document.createElement('input')\n      files.type = 'file'\n      files.name = 'uploads[]'\n      files.multiple = true\n      files.accept = 'image/gif, image/jiff, image/jpeg, image/jpg, image/png, image/webp, video/mp4, video/webm, video/mkv, audio/mp3, audio/wav, audio/mpeg'\n      files.files = []*/\n      \n      let files = []\n      if(e.dataTransfer.items){\n        [...e.dataTransfer.items].forEach((item, i) => {\n          if (item.kind === \"file\") {\n            const file = item.getAsFile()\n            files = [...files, file]\n          }\n        })\n      }else{\n        files = Array.from(e.dataTransfer.files)\n      }\n      if(files.length) this.processUpload(files)\n    },\n    addLink(size, type, ct, href, selected, userID, slug, originalSlug, origin, serverTZO, views, id, date){\n    \n      let obj = {\n        size,\n        type,\n        ct,\n        href,\n        slug,\n        origin,\n        selected,\n        userID,\n        id,\n        originalSlug,\n        linkType: 'link',\n        serverTZO,\n        views,\n        date\n      }\n      this.state.links.push(obj)\n    },\n    loadFiles(){\n      //if(this.state.links.length) return\n      // uncomment above to disable subsequent\n      // click->open-file-dialog, after 1 successful upload\n      \n      let files = document.createElement('input')\n      files.type = 'file'\n      files.multiple = true\n      files.accept = 'image/gif, image/jiff, image/jpeg, image/jpg, image/png, image/webp, video/mp4, video/webm, video/mkv, audio/mp3, audio/wav, audio/mpeg'\n      files.onchange = () => this.processUpload(Array.from(files.files))\n      files.click()\n    }\n  },\n  mounted(){\n    this.$refs.main.focus()\n    this.state.loadFiles = this.loadFiles\n    this.preload = [ ...this.preload,\n      [document.createElement('video'), 'loading.mp4'],\n    ]\n    this.preload.map(v => {\n      v[0].src = this.state.URLbase + '/' + v[1]\n    })\n  }\n}\n</script>\n\n<style scoped>\n  .main{\n    background-color: #000011ee;\n    font-size: 20px;\n    overflow-y: scroll;\n    overflow-x: hidden;\n    height: 100%;\n    padding: 0px;\n    box-sizing: border-box;\n    text-align: center;\n    position: absolute;\n    padding-top: 100px;\n    z-index: 0;\n    padding-bottom: 200px;\n    width: 100vw;\n  }\n  /*.dropTarget:hover{\n    background-color: #0648;\n    cursor: pointer;\n  }*/\n  .dropTarget{\n    color: #0f8;\n    display: inline-block;\n    text-align: left;\n    background-repeat: no-repeat;\n    background-position: center center;\n    background-size: 100% 100%;\n    border-radius: 10px;\n    /*background-image: url(../assets/loading.gif);*/\n    /*border: 1px solid #4088;*/\n    /*background-color: #0468;*/\n    width: 100%;\n    min-height: calc(100% - 10px);\n    box-sizing: border-box;\n  }\n  .links{\n    margin: 0;\n    box-sizing: border-box;\n    text-align: center;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-evenly;\n  }\n  @keyframes colorCycle{\n    0% {\n      background-color:  #ff000022;\n      box-shadow: 0 0 150px 150px #ff000022;\n    }\n    5% {\n      background-color: #ff4c0022;\n      box-shadow: 0 0 150px 150px #ff4c0022;\n    }\n    10% {\n      background-color: #ff990022;\n      box-shadow: 0 0 150px 150px #ff990022;\n    }\n    15% {\n      background-color: #ffe50022;\n      box-shadow: 0 0 150px 150px #ffe50022;\n    }\n    20% {\n      background-color: #ccff0022;\n      box-shadow: 0 0 150px 150px #ccff0022;\n    }\n    25% {\n      background-color: #7fff0022;\n      box-shadow: 0 0 150px 150px #7fff0022;\n    }\n    30% {\n      background-color: #32ff0022;\n      box-shadow: 0 0 150px 150px #32ff0022;\n    }\n    35% {\n      background-color: #00ff1922;\n      box-shadow: 0 0 150px 150px #00ff1922;\n    }\n    40% {\n      background-color: #00ff6522;\n      box-shadow: 0 0 150px 150px #00ff6522;\n    }\n    45% {\n      background-color: #00ffb222;\n      box-shadow: 0 0 150px 150px #00ffb222;\n    }\n    50% {\n      background-color: #00ffff22;\n      box-shadow: 0 0 150px 150px #00ffff22;\n    }\n    55% {\n      background-color: #00b2ff22;\n      box-shadow: 0 0 150px 150px #00b2ff22;\n    }\n    60% {\n      background-color: #0065ff22;\n      box-shadow: 0 0 150px 150px #0065ff22;\n    }\n    65% {\n      background-color: #0019ff22;\n      box-shadow: 0 0 150px 150px #0019ff22;\n    }\n    70% {\n      background-color: #3300ff22;\n      box-shadow: 0 0 150px 150px #3300ff22;\n    }\n    75% {\n      background-color: #7f00ff22;\n      box-shadow: 0 0 150px 150px #7f00ff22;\n    }\n    80% {\n      background-color: #cb00ff22;\n      box-shadow: 0 0 150px 150px #cb00ff22;\n    }\n    85% {\n      background-color: #ff00e522;\n      box-shadow: 0 0 150px 150px #ff00e522;\n    }\n    90% {\n      background-color: #ff009822;\n      box-shadow: 0 0 150px 150px #ff009822;\n    }\n    95% {\n      background-color: #ff004c22;\n      box-shadow: 0 0 150px 150px #ff004c22;\n    }\n    100% {\n      background-color: #ff000022;\n      box-shadow: 0 0 150px 150px #ff000022;\n    }\n  }\n  #dropTargetCaption{\n    display: inline-block;\n    width: 340px;\n    position: fixed;\n    left: 50%;\n    top: calc(50% - 24px);\n    transform: translate(-50%, -50%);\n    padding: 38px;\n    border-radius: 32%;\n    height: 320px;\n    padding-top: 0;\n    padding-right: 28px;\n    background-color: #103c;\n    box-shadow: 0 0 150px 150px #103c;\n    /*animation: colorCycle 5s infinite linear;*/\n  }\n  .uploadModal{\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    background: #001d;\n    z-index: 100000;\n    line-height: 1.05em;\n  }\n  .uploadProgressContainer{\n    position: fixed;\n    top: 0;\n    left: 0;\n    overflow: auto;\n    width: 100vw;\n    height: 100vh;\n    background: #102d;\n    z-index: 100000;\n    line-height: 1.05em;\n    color: #f00;\n    font-size: 24px;\n  }\n  .uploadModalInner{\n    position: absolute;\n    top: calc(50% - 60px);\n    left: 50%;\n    width: 400px;\n    height: 280px;\n    background: #103b;\n    z-index: 100000;\n    box-shadow: 0px 0px 100px 100px #103b;\n    transform: translate(-50%, -50%);\n    border-radius: 10px;\n  }\n  .dragover{\n    background: #0246;\n  }\n  .progressBar{\n    width: 80%;\n    height: 16px;\n    margin-left: auto;\n    margin-right: auto;\n    margin-top: 10px;\n  }\n  .progressBarInner{\n    background: #40f8;\n    height: 100%;\n  }\n  .progressBarInnerOutline{\n    border: 1px solid #84f3;\n    height: 100%;\n  }\n  .progressText{\n    position: relative;\n    font-size: 17px;\n    color: #dbf;\n    right: 50%;\n    transform: translate(50%, -85%);\n    text-shadow: 1px 1px 2px #000;\n    display: inline-block;\n  }\n</style>\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}