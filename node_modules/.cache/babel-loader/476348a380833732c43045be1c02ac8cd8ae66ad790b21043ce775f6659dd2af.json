{"ast":null,"code":"export default {\n  name: 'Link',\n  props: ['state', 'link'],\n  data() {\n    return {\n      c: document.createElement('canvas'),\n      x: null,\n      linkType: '',\n      img: null,\n      w: 0,\n      h: 0,\n      t: 0\n    };\n  },\n  computed: {\n    views() {\n      return 'views: ' + this.link.views.toLocaleString();\n    },\n    fileName() {\n      let ret = this.link.origin.split(': ')[1];\n      if (ret.length > 23) ret = ret.substring(0, 10) + '...' + ret.substring(ret.length - 10);\n      return ret;\n    },\n    size() {\n      let MB_ = 1024 ** 2;\n      let tbytes = this.link.size;\n      let MB = tbytes / MB_ | 0;\n      let KB = (tbytes / MB_ - MB) * MB_ / 1024 | 0;\n      let B = ((tbytes / MB_ - MB) * MB_ / 1024 - KB) * KB | 0;\n      let ret;\n      if (MB) {\n        ret = Math.round(tbytes / MB_ * 100) / 100 + ' MB';\n      } else if (KB) {\n        ret = Math.round((tbytes / MB_ - MB) * MB_ / 1024 * 100) / 100 + ' KB';\n      } else {\n        ret = this.link.size.toLocaleString() + ' B';\n      }\n      return ret;\n    },\n    age() {\n      let tseconds = ((new Date() - new Date(this.link.date)) / 1000 | 0) + 3600 * (new Date().getTimezoneOffset() / 60 - 4);\n      let years = tseconds / 31536000 | 0;\n      let days = (tseconds / 31536000 - years) * 31536000 / 86400 | 0;\n      let hours = ((tseconds / 31536000 - years) * 31536000 / 86400 - days) * 86400 / 3600 | 0;\n      let minutes = (((tseconds / 31536000 - years) * 31536000 / 86400 - days) * 86400 / 3600 - hours) * 3600 / 60 | 0;\n      let seconds = ((((tseconds / 31536000 - years) * 31536000 / 86400 - days) * 86400 / 3600 - hours) * 3600 / 60 - minutes) * 60 | 0;\n      let ret = '';\n      ret += years ? `${years} year${years > 1 ? 's' : ''}, ` : '';\n      ret += days ? `${days} day${days > 1 ? 's' : ''}, ` : '';\n      ret += hours ? `${hours} hour${hours > 1 ? 's' : ''}, ` : '';\n      ret += minutes ? `${minutes} minute${minutes > 1 ? 's' : ''}` : '';\n      //ret += seconds? `${seconds} second${seconds>1?'s':''}` : ''\n      return ret ? ret : 'added just now...';\n    }\n  },\n  methods: {\n    download() {\n      let a = document.createElement('a');\n      a.download = this.fileName;\n      a.href = this.link.href;\n      a.style.position = 'absolute';\n      a.style.opacity = .01;\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n    },\n    updateLinkSelected() {\n      if (this.link.selected) {\n        this.link.selected = false;\n      } else {\n        this.link.selected = true;\n      }\n      console.log('selected', this.link.selected);\n    },\n    copy() {\n      this.state.copy(this.link.href);\n    },\n    open() {\n      open(this.link.href, '_blank');\n    },\n    preview() {\n      this.state.previewPosition = this.link.ct;\n      this.state.previewPosition += this.link.linkType == 'userLink' ? this.state.links.length : 0;\n      this.state.previewLink = this.link;\n      this.state.showPreview = true;\n    },\n    getThumb() {\n      let l;\n      try {\n        this.img.src = this.linkType == 'audio' ? this.state.URLbase + '/' + 'musicNotes.svg' : this.state.URLbase + '/' + 'thumb.php?res=resources/' + (this.link.originalSlug + '.' + this.link.href.split('.')[1]);\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    Draw() {\n      this.x.globalAlpha = 1;\n      this.x.fillStyle = '#0008';\n      this.x.fillRect(0, 0, this.c.width, this.c.height);\n      let fillStyle = 'contain';\n      let scl;\n      switch (fillStyle) {\n        case 'contain':\n          scl = this.c.width / this.c.height <= 1.777777778 ? this.c.width / this.w : this.c.height / this.h;\n          break;\n        case 'cover':\n          scl = this.c.width / this.c.height > 1.777777778 ? this.c.width / this.w : this.c.height / this.h;\n          break;\n      }\n      let margin = 5;\n      let w = this.w * scl - margin;\n      let h = this.h * scl - margin;\n      this.x.drawImage(this.img, this.c.width / 2 - w / 2, this.c.height / 2 - h / 2, w, h);\n      this.t += 1 / 60;\n      switch (this.linkType) {\n        case 'image':\n          setTimeout(() => {\n            if (!this.img.width || !this.img.height) this.getThumb();\n            requestAnimationFrame(this.Draw);\n          }, 1000);\n          break;\n        case 'video':\n          if (!this.img.videoWidth || !this.img.videoHeight) {\n            setTimeout(() => {\n              this.getThumb();\n              requestAnimationFrame(this.Draw);\n            }, 1000);\n          } else {\n            requestAnimationFrame(this.Draw);\n          }\n          break;\n      }\n    }\n  },\n  mounted() {\n    this.$refs.linkThumb.appendChild(this.c);\n    this.x = this.c.getContext('2d');\n    this.linkType = this.link.type.split('/')[0];\n    this.c.width = 500;\n    this.c.height = 500 / 1.77777778;\n    this.c.style.width = '200px';\n    this.c.style.height = '113px';\n    this.c.style.borderRadius = '20px';\n    if (this.linkType == 'video') {\n      this.img = document.createElement('video');\n      this.img.loop = true;\n      this.img.muted = true;\n      this.img.oncanplay = () => {\n        this.w = this.img.videoWidth;\n        this.h = this.img.videoHeight;\n        this.img.play();\n        this.Draw();\n      };\n      this.img.src = this.link.href;\n    }\n    if (this.linkType == 'image' || this.linkType == 'audio') {\n      this.img = new Image();\n      this.img.onload = () => {\n        this.w = this.img.width;\n        this.h = this.img.height;\n        this.Draw();\n      };\n      this.getThumb();\n    }\n  }\n};","map":{"version":3,"names":["name","props","data","c","document","createElement","x","linkType","img","w","h","t","computed","views","link","toLocaleString","fileName","ret","origin","split","length","substring","size","MB_","tbytes","MB","KB","B","Math","round","age","tseconds","Date","date","getTimezoneOffset","years","days","hours","minutes","seconds","methods","download","a","href","style","position","opacity","body","appendChild","click","remove","updateLinkSelected","selected","console","log","copy","state","open","preview","previewPosition","ct","links","previewLink","showPreview","getThumb","l","src","URLbase","originalSlug","error","Draw","globalAlpha","fillStyle","fillRect","width","height","scl","margin","drawImage","setTimeout","requestAnimationFrame","videoWidth","videoHeight","mounted","$refs","linkThumb","getContext","type","borderRadius","loop","muted","oncanplay","play","Image","onload"],"sources":["/home/whitehotrobot/imjur.42web.io/src/components/Link.vue"],"sourcesContent":["<!--\r\ntodo\r\n\r\n  * upload targets @ not-logged-in\r\n\r\n  ✔ dropable files\r\n  ✔ fix video & audio thumbnails\r\n  ✔ file hash unifies same-upload sources\r\n  ✔ fix loading animations\r\n  ✔ preload loading (and other) assets\r\n  ✔ display errors\r\n  ✔ tile-able cards (flex)\r\n  ✔ log original file name\r\n  ✔ lightbox sim / previews\r\n  ✔ checkboxes & \"with selected\" toobar\r\n  ✔ uploading progress bars\r\n  * upload progress bars\r\n  * download button on preview modal\r\n  * users, optional logins/profiles\r\n    └-> ✔ login button\r\n        ✔ profile page\r\n        * collections\r\n        * comments\r\n        * votes\r\n        \r\n  * URL uploads\r\n  * admin panel\r\n  * optional autodelete\r\n  * log & display asset origin\r\n  * social media metadata\r\n  * gallery / trending\r\n  * load/resource balancing\r\n  * youtube field  // likely not to work without shell access\r\n  \r\n-->\r\n\r\n<template>\r\n  <div class=\"link\" ref=\"anchor\">\r\n    <label v-if=\"state.loggedIn\" :for=\"link.linkType+link.ct\" class=\"checkboxLabel\" :key=\"link.linkType+link.ct+'key'\">\r\n      <input type=\"checkbox\" v-model=\"link.selected\" @input=\"updateLinkSelected()\" :id=\"link.linkType+link.ct\">\r\n      <span class=\"checkmark\" style=\"margin-left: -30px;\"></span>\r\n      <span style=\"font-size:.75em;margin-top:5px;display:block;color:#4f88;padding:0;margin-left:-34px;\">select</span><br>\r\n    </label>\r\n    \r\n    <div class=\"views\" v-html=\"views\">\r\n    </div>\r\n    \r\n    <div class=\"linkThumb\" ref=\"linkThumb\" @click.prevent.stop=\"preview()\" title=\"view this asset\"></div>\r\n    <!--#{{link.ct+1}}-->\r\n    <div class=\"linkButtons\">\r\n      <div class=\"copyLinkButton\" @click.prevent.stop=\"copy()\" title=\"copy link to clipboard\"></div><br>\r\n      <a :href=\"link.href\" class=\"openButton\" @click.prevent.stop=\"open()\" title=\"open link in new tab\"></a><br>\r\n      <div class=\"downloadButton\" @click.prevent.stop=\"download()\" title=\"download asset\"></div><br>\r\n    </div>\r\n    <br>\r\n    <table class=\"assetData\">\r\n      <tr><td class=\"tdLeft\">age</td><td class=\"tdRight\" v-html=\"age\"></td></tr>\r\n      <tr><td class=\"tdLeft\">size</td><td class=\"tdRight\" v-html=\"size\"></td></tr>\r\n      <tr><td class=\"tdLeft\">name</td><td class=\"tdRight\" v-html=\"fileName\"></td></tr>\r\n    </table>\r\n    \r\n    <!-- <span style=\"visibility: hidden; position: absolute;\" v-html=\"link.href\" ref=\"href\"></span> -->\r\n    <!-- <span class=\"href\" style=\"font-size: 1em\" v-html=\"link.type\"></span><br> -->\r\n    <!-- <span class=\"href\" style=\"font-size: 1em\" v-html=\"'size: ' + link.size.toLocaleString('en-us')\"></span><br> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'Link',\r\n  props: [ 'state', 'link' ],\r\n  data(){\r\n    return {\r\n      c: document.createElement('canvas'),\r\n      x: null,\r\n      linkType: '',\r\n      img: null,\r\n      w: 0,\r\n      h: 0,\r\n      t: 0,\r\n    }\r\n  },\r\n  computed: {\r\n    views(){\r\n      return 'views: ' + this.link.views.toLocaleString()\r\n    },\r\n    fileName(){\r\n      let ret = this.link.origin.split(': ')[1]\r\n      if(ret.length > 23) ret = ret.substring(0, 10) + '...' + ret.substring(ret.length-10)\r\n      return ret\r\n    },\r\n    size(){\r\n      let MB_ = 1024**2\r\n      let tbytes = this.link.size\r\n      let MB = tbytes / MB_ | 0\r\n      let KB = ((tbytes / MB_) - MB) * MB_ / 1024 | 0\r\n      let B = (((tbytes / MB_) - MB) * MB_ / 1024 - KB) * KB | 0\r\n      let ret\r\n      if(MB){\r\n        ret = (Math.round(tbytes / MB_*100)/100) + ' MB'\r\n      } else if(KB) {\r\n        ret = (Math.round(((tbytes / MB_) - MB) * MB_ / 1024*100)/100) + ' KB'\r\n      } else {\r\n        ret = this.link.size.toLocaleString() + ' B'\r\n      }\r\n      return ret\r\n    },\r\n    age(){\r\n      let tseconds = (((new Date()) - (new Date(this.link.date)))/1000|0) + 3600 * (((new Date).getTimezoneOffset()/60) - 4)\r\n      let years = (tseconds/31536000)|0\r\n      let days = (((tseconds/31536000)-years) * 31536000) / 86400 | 0\r\n      let hours = (((((tseconds/31536000)-years) * 31536000) / 86400) - days) * 86400 / 3600 | 0\r\n      let minutes = (((((((tseconds/31536000)-years) * 31536000) / 86400) - days) * 86400 / 3600) - hours) * 3600 / 60 | 0\r\n      let seconds = (((((((((tseconds/31536000)-years) * 31536000) / 86400) - days) * 86400 / 3600) - hours) * 3600 / 60) - minutes) * 60| 0\r\n      let ret = ''\r\n      ret += years ? `${years} year${years>1?'s':''}, ` : ''\r\n      ret += days ? `${days} day${days>1?'s':''}, ` : ''\r\n      ret += hours ? `${hours} hour${hours>1?'s':''}, ` : ''\r\n      ret += minutes ? `${minutes} minute${minutes>1?'s':''}` : ''\r\n      //ret += seconds? `${seconds} second${seconds>1?'s':''}` : ''\r\n      return ret ? ret : 'added just now...'\r\n    }\r\n  },\r\n  methods: {\r\n    download(){\r\n      let a = document.createElement('a')\r\n      a.download = this.fileName\r\n      a.href = this.link.href\r\n      a.style.position = 'absolute'\r\n      a.style.opacity = .01\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      a.remove()\r\n    },\r\n    updateLinkSelected(){\r\n      if(this.link.selected){\r\n        this.link.selected = false\r\n      }else{\r\n        this.link.selected = true\r\n      }\r\n      console.log('selected', this.link.selected)\r\n    },\r\n    copy(){\r\n      this.state.copy(this.link.href)\r\n    },\r\n    open(){\r\n      open(this.link.href, '_blank')\r\n    },\r\n    preview(){\r\n      this.state.previewPosition = this.link.ct\r\n      this.state.previewPosition += this.link.linkType == 'userLink' ? this.state.links.length : 0\r\n      this.state.previewLink = this.link\r\n      this.state.showPreview = true\r\n    },\r\n    getThumb(){\r\n      let l\r\n      try{\r\n        this.img.src = this.linkType == 'audio' ? this.state.URLbase + '/' + 'musicNotes.svg' : this.state.URLbase + '/' + 'thumb.php?res=resources/' + (this.link.originalSlug + '.' + this.link.href.split('.')[1])\r\n      } catch(error){\r\n        console.log(error)\r\n      }\r\n    },\r\n    Draw(){\r\n      this.x.globalAlpha = 1\r\n      this.x.fillStyle='#0008'\r\n      this.x.fillRect(0,0,this.c.width,this.c.height)\r\n      let fillStyle = 'contain'\r\n      let scl\r\n      switch(fillStyle){\r\n        case 'contain':\r\n          scl = this.c.width/this.c.height <= 1.777777778 ? this.c.width/this.w : this.c.height/this.h\r\n          break\r\n        case 'cover':\r\n          scl = this.c.width/this.c.height > 1.777777778 ? this.c.width/this.w : this.c.height/this.h\r\n          break\r\n      }\r\n      let margin = 5\r\n      let w = this.w * scl - margin\r\n      let h = this.h * scl - margin\r\n      this.x.drawImage(this.img,this.c.width/2-w/2,this.c.height/2-h/2,w,h)\r\n      this.t += 1/60\r\n      switch(this.linkType){\r\n        case 'image':\r\n          setTimeout(()=>{\r\n            if(!this.img.width || !this.img.height) this.getThumb()\r\n            requestAnimationFrame(this.Draw)\r\n          }, 1000)\r\n          break\r\n        case 'video':\r\n          if(!this.img.videoWidth || !this.img.videoHeight){\r\n            setTimeout(()=>{\r\n              this.getThumb()\r\n              requestAnimationFrame(this.Draw)\r\n            }, 1000)\r\n          }else{\r\n            requestAnimationFrame(this.Draw)\r\n          }\r\n          break\r\n      }\r\n    }\r\n  },\r\n  mounted(){\r\n    this.$refs.linkThumb.appendChild(this.c)\r\n    this.x = this.c.getContext('2d')\r\n    this.linkType = this.link.type.split('/')[0]\r\n    this.c.width = 500\r\n    this.c.height = 500/1.77777778\r\n    this.c.style.width = '200px'\r\n    this.c.style.height = '113px'\r\n    this.c.style.borderRadius = '20px'\r\n    if(this.linkType == 'video'){\r\n      this.img = document.createElement('video')\r\n      this.img.loop = true\r\n      this.img.muted = true\r\n      this.img.oncanplay = () => {\r\n        this.w = this.img.videoWidth\r\n        this.h = this.img.videoHeight\r\n        this.img.play()\r\n        this.Draw()\r\n      }\r\n      this.img.src = this.link.href\r\n    }\r\n    if(this.linkType == 'image' || this.linkType == 'audio'){\r\n      this.img = new Image()\r\n      this.img.onload = () => {\r\n        this.w = this.img.width\r\n        this.h = this.img.height\r\n        this.Draw()\r\n      }\r\n      this.getThumb()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .link:hover{\r\n    background-color: #408a;\r\n  }\r\n  .link{\r\n    display: inline-block;\r\n    color: #acd;\r\n    background-color: #002a;\r\n    font-size: 20px;\r\n    min-width: 268px;\r\n    box-sizing: border-box;\r\n    text-align: left;\r\n    margin: 5px;\r\n    word-break: break-word;\r\n    border-radius: 10px;\r\n    vertical-align: top;\r\n    border: 3px solid #4086;\r\n    padding: 5px;\r\n  }\r\n  .href{\r\n    font-size: .6em;\r\n    color: #0ff;\r\n    margin: 5px;\r\n    padding: 3px;\r\n    width: calc(100% - 10px);\r\n  }\r\n  .copyLinkButton, .openButton, .downloadButton{\r\n    display: inline-block;\r\n    background-position: center center;\r\n    background-repeat: no-repeat;\r\n    background-image: url(../assets/link.png);\r\n    width: 32px;\r\n    height: 32px;\r\n    border-radius: 0px;\r\n    border: none;\r\n    cursor: pointer;\r\n    margin-top: 0px;\r\n    margin-left: 3px;\r\n  }\r\n  .openButton{\r\n    background-image: url(../assets/open.png);\r\n    background-color: #08f;\r\n    background-size: 80% 80%;\r\n  }\r\n  .copyLinkButton{\r\n    background-size: contain;\r\n    background-image: url(../assets/link.png);\r\n    background-color: #f06;\r\n  }\r\n  .downloadButton{\r\n    background-size: contain;\r\n    background-image: url(../assets/download.png);\r\n    background-color: #0000;\r\n    background-size: 52px 37px;\r\n  }\r\n  .linkThumb{\r\n    float: left;\r\n    width: 200px;\r\n    height: 113px;\r\n    margin: 5px;\r\n    margin-top: 10px;\r\n    cursor: pointer;\r\n    background-size: contain;\r\n    background-position: 20px 20px;\r\n    background-repeat: no-repeat;\r\n    background-color: #000;\r\n    border-radius: 20px;\r\n  }\r\n  .assetData{\r\n    border-collapse: collapse;\r\n    font-size: 14px;\r\n    text-shadow: 2px 2px 2px #000;\r\n    background: #0003;\r\n    width: 100%;\r\n  }\r\n  .tdLeft{\r\n    text-align: right;\r\n    color: #f80;\r\n    border-bottom: 1px solid #4fc2;\r\n    padding: 3px;\r\n  }\r\n  .tdRight{\r\n    text-align: left;\r\n    color: #0f8;\r\n    border-bottom: 1px solid #4fc2;\r\n    padding: 3px;\r\n  }\r\n  .linkButtons{\r\n    margin-top: 11px;\r\n    display: inline-block;\r\n  }\r\n  .views{\r\n    position: relative;\r\n    margin-left: 200px;\r\n  }\r\n</style>\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}